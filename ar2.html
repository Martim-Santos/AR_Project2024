<html>
  <head>
    <title>AR.js A-Frame Location-based</title>
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/3.4.5/three.js/build/ar-threex-location-only.js'></script>
    <script type='text/javascript' src='https://raw.githack.com/AR-js-org/AR.js/3.4.5/aframe/build/aframe-ar.js'></script>

    <script>
      AFRAME.registerComponent('show-plane', {
        schema: {
          color: { type: 'string', default: 'white' } // Default plane color
        },
        init() {
          this.plane = null; // Store plane reference
          this.el.addEventListener('click', this.showPlane.bind(this)); // Click event
        },
        showPlane() {
          if (this.plane) return; // Prevent multiple planes for one sphere

          const scene = document.querySelector('a-scene');

          // Create a plane
          this.plane = document.createElement('a-plane');
          this.plane.setAttribute('position', '0 1 -3'); // In front of the camera
          this.plane.setAttribute('width', '2');
          this.plane.setAttribute('height', '1');
          this.plane.setAttribute('color', this.data.color); // Set color from schema
          this.plane.setAttribute('material', 'opacity: 0.8; transparent: true');

          // Clicking the plane removes it
          this.plane.addEventListener('click', () => {
            scene.removeChild(this.plane);
            this.plane = null; // Allow recreation
          });

          scene.appendChild(this.plane);
        }
      });
    </script>
  </head>
  <body>
    <a-scene vr-mode-ui='enabled: false' arjs='sourceType: webcam; videoTexture: true; debugUIEnabled: false' renderer='antialias: true; alpha: true'>
      <a-entity cursor="rayOrigin:mouse">
        <a-sphere show-plane="color: red" position="0 1.25 -5" radius="1.25" color="red" shadow></a-sphere>
        <a-sphere show-plane="color: blue" position="5 1.25 -5" radius="1.25" color="blue" shadow></a-sphere>
        <a-sphere show-plane="color: white" position="-5 1.25 -5" radius="1.25" color="green" shadow></a-sphere>
      </a-entity>
    </a-scene>
  </body>
</html>
